{"version":3,"sources":["../tools/canvas_tools.js","../index.js","app.js"],"names":["_initCvs","ctx","width","height","fillStyle","strokeStyle","_primer","fillRect","_drawRawOsc","data","beginPath","i","length","x","y","moveTo","lineTo","stroke","cvs","source","dest","fft","init","_ct","primer","actx","FFT","paused","anl","createAnalyser","fftSize","connect","WIDTH","HEIGHT","u8ar","Uint8Array","cctx","getContext","draw","requestAnimationFrame","clearRect","getByteTimeDomainData","start","pause","reset","fill","osc","AudioContext","document","querySelector","navigator","mediaDevices","getUserMedia","audio","video","then","stream","_streamSrc","createMediaStreamSource","AudioOSC","addEventListener"],"mappings":"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","file":"app.432f5a30.js","sourceRoot":"../example","sourcesContent":["function _initCvs(ctx, width, height){\n    ctx.fillStyle   = \"#000\";\n    ctx.strokeStyle = \"#0f0\";\n}\nfunction _primer(ctx, width, height){\n    ctx.fillRect(0,0,width,height);\n}\nfunction _drawRawOsc(ctx,data,width,height){\n    ctx.beginPath();\n    for(let i=0; i < data.length; i++){\n        let x = i * (width * 1.0 / data.length); // need to fix x\n        let v = data[i] / 128.0;\n        let y = v * height / 2;\n        if(i === 0) ctx.moveTo(x,y);\n        else ctx.lineTo(x,y);\n    }\n    ctx.stroke();\n}\nexport {\n    _initCvs,\n    _primer,\n    _drawRawOsc\n}","\"use strict\";\nimport * as _ct from \"./tools/canvas_tools\";\nexport default function(ctx, cvs, source, dest = null, fft = 2048, init = _ct._initCvs, primer = _ct._primer){\n        this.actx   = ctx;\n        this.FFT    = fft;\n        this.cvs    = cvs;\n        this.init   = init;\n        this.primer = primer;\n        this.paused = false;\n        this.anl    = this.actx.createAnalyser();\n        // Configure Analyzer\n        this.anl.fftSize = this.FFT;\n        source.connect(this.anl);\n        if(dest) this.anl.connect(dest);\n        // Set up Canvas\n        let {width = 300, height = 150} = this.cvs;\n        this.WIDTH  = width;\n        this.HEIGHT = height;\n        this.u8ar = new Uint8Array(this.FFT);\n        this.cctx = this.cvs.getContext(\"2d\");\n        this.init(this.cctx,this.WIDTH,this.HEIGHT);\n        this.draw = () =>{\n            if(!this.paused) requestAnimationFrame(this.draw);\n            this.cctx.clearRect(0 , 0, this.WIDTH, this.HEIGHT);\n            this.primer(this.cctx, this.WIDTH, this.HEIGHT);\n            this.anl.getByteTimeDomainData(this.u8ar);\n            _ct._drawRawOsc(this.cctx, this.u8ar, this.WIDTH, this.HEIGHT);\n        }\n        this.start = () => {\n            this.paused = false;\n            this.draw();\n        }\n        this.pause = () =>{\n            this.paused = true;\n        }\n        this.reset = () =>{\n            this.u8ar = new Uint8Array().fill(0);\n            this.cctx.clearRect(0 , 0, this.WIDTH, this.HEIGHT);\n            this.primer(this.cctx, this.WIDTH, this.HEIGHT);\n            _ct._drawRawOsc(this.cctx, this.u8ar, this.WIDTH, this.HEIGHT);\n        }\n}","import AudioOSC from \"../index\";\nlet osc = null;\nfunction init(){\n    let ctx = new AudioContext();\n    let cvs = document.querySelector(\".cvs\");\n    navigator.mediaDevices.getUserMedia({audio: true, video: true})\n        .then(stream=>{\n            let _streamSrc = ctx.createMediaStreamSource(stream);\n            osc            = new AudioOSC(ctx, cvs, _streamSrc,null,2048);\n            osc.start();\n            document.querySelector(\".btn.pause\").addEventListener(\"click\",osc.pause);\n            document.querySelector(\".btn.reset\").addEventListener(\"click\",osc.reset);\n        });\n}\n\ndocument.querySelector(\".btn.start\").addEventListener(\"click\",init);"]}